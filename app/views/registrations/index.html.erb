<h2>Listing <%= @registrations.length %> Registrations</h2>

<table>
	<thead>
	  <tr>
	  	<td>User</td>
	    <td>Credit</td>
			<% @prerequisites.sort_by(&:id).each do |prereq| %>
			<td><%= prereq.prerequisite_number %></td>
			<% end %>
	  </tr>
	</thead>
	
	<tbody>
	<% @registrations.each do |registration| %>
	  <tr>
	    <td><%=link_to h(registration.user.email), registration.user %></td>
	    <td><%= registration.for_credit ? 'Yes' : 'No' %></td>
			<% registration.prerequisite_answers.
                      sort_by(&:prerequisite_id).each do |answer| %>
				<td>
				<% if answer.took_course? %>
				  <%= valid_icon_tag %>
				<% else %>
				  <%= answer.waiver_answer %>
				<% end %>
				</td>
			<% end %>
	    <td><%= link_to 'Show', registration %></td>
	    <td><%= link_to 'Edit', edit_registration_path(registration) %></td>
	    <td><%= link_to 'Destroy', registration,
	                :confirm => 'Are you sure?', :method => :delete %></td>
	    <td>
		<%= collection_select :recitation_section, :serial,
				      RecitationSection.all, :serial, :recitation_name,
				      { :prompt => 'Select Recitation',
					:selected => registration.recitation_section.nil? ? nil : registration.recitation_section.serial() },
					:data => { :remote => true,
						   :url => url_for(registration),
						   :method => :put } %>
	  </tr>
	<% end %>
	</tbody>
</table>
