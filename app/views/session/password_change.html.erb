<h2>Password Reset</h2>

<% if @credential.updated_at %>
<p class="lead password_age_notice">
  Your have been using the same password for
  <span class="password_age">
    <%= time_ago_in_words @credential.updated_at, include_seconds: true %>.
  </span>
</p>
<% end %>

<%= form_for @credential, url: change_password_session_path,
                          as: :credential, method: :post do |f| %>
  <%= f.error_messages %>

  <% unless @credential.new_record? %>
  <div class="row">
    <div class="small-3 columns">
      <%= f.label :old_password, 'Current Password', class: 'text-right middle' %>
    </div>
    <div class="small-6 columns">
      <%= f.password_field :old_password %>
    </div>
  </div>
  <% end %>

  <div class="row">
    <div class="small-3 columns">
      <%= f.label :password, 'New Password', class: 'text-right middle' %>
    </div>
    <div class="small-6 columns">
      <%= f.password_field :password, required: true, placeholder: 'be clever',
            data: { pwnfx_confirm: 'new-password' } %>
    </div>
  </div>

  <div class="row">
    <div class="small-3 columns">
      <%= f.label :password_confirmation, 'Re-enter Password',
            class: 'text-right middle' %>
    </div>
    <div class="small-6 columns">
      <%= f.password_field :password_confirmation, required: true,
            placeholder: 'can you type that again?',
            data: { pwnfx_confirm: 'new-password' } %>
    </div>
    <div class="small-3 columns">
      <span class="error-text middle" data-pwnfx-confirm-win="new-password">
        <%= valid_icon_tag %> matches
      </span>
      <span class="error-text middle" data-pwnfx-confirm-fail="new-password">
        <%= invalid_icon_tag %> does not match
      </span>
    </div>
  </div>

  <%= submit_button_tag do %>
    <%= save_icon_tag %> Save New Password
  <% end %>
<% end %>
