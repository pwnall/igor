<dt>
	<%= team.partition.name %>:
	
	<% if @s_user.admin? %>
	<% old_team_value, @team = @team, team %>
	<%= in_place_editor_field(:team, :name, :with => "form.serialize() + '&authenticity_token=#{form_authenticity_token}'") %>
	<% @team = old_team_value %>
	<% else %>
	<%= team.name %>
	<% end %>
</dt>
<dd>
	<ul>
	<% team.memberships.includes(:user).sort_by { |m| m.user.display_name_for @s_user }.each do |membership| %>
	  <li>
	    <%= user_image_tag membership.user %>
	    <%= link_to membership.user.display_name_for(@s_user), membership.user,
                  :class => 'name' %>
	    <% if @s_user.admin? %>
	    <% if membership.user.registration %>
			<span class="status">			
	    <%= membership.user.registration.for_credit ? 'Credit' : 'Listener' %>
			</span>
	    <% end %>
	    <%= link_to 'Remove', membership, :method => :delete,
	            :confirm => "Remove #{membership.user.real_name} from #{team.name}" %>
	    <% end %>	
	  </li>
	<% end %>
	</ul>
	<% if @s_user.admin? %>
	<p>
		<%= form_for TeamMembership.new(:team => team) do |f| %>
		  <%= f.hidden_field :team_id %>
		
		  <%= text_field_tag :query, '', :id => "query_#{team.id}", :autocomplete => false %>
			<%= f.submit "Add to #{team.name}" %>
		  <div class="auto_complete" id="query_<%= team.id %>_auto_complete" style="width: 600px;"></div>
		  <%= auto_complete_field "query_#{team.id}", :url => lookup_users_path, :method => :get, :frequency => 0.2 %>
		<% end %>		
	</p>
	<% end %>
</dd>
