<ol class="submission-list">
<% deliverable.submissions.includes(:analysis, :user => :profile).
                order('updated_at DESC').each do |submission| %>
  <li>
    <%= link_to submission.analysis || submission do %>
      <figure title="<%= submission.user.name %>">
        <%= user_image_tag submission.user, size: :large %>
        <%= analysis_status_icon_tag submission.analysis %>
      </figure>
    <% end %>
  </li>
<% end %>
<% if deliverable.submissions.any? { |s| s.analysis.status_will_change? } %>
  <li data-pwnfx-delayed="submission-states" data-pwnfx-delayed-method="GET"
      data-pwnfx-delayed-url="<%= submission_dashboard_deliverable_path(deliverable) %>"
      data-pwnfx-delayed-scope="submissions-list" data-pwnfx-delayed-ms="5000">
    <%= ajax_spinner_image_tag %>
  </li>
<% end %>
</ol>
