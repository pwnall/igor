<section class="assignment">
  <h2 class="heading">
    <%= assignment.name %>
  
    <% if current_user.admin? %>
    <span class="actions">
      <%= link_to dashboard_assignment_path(assignment), class: 'button' do %>
        <%= dashboard_icon_tag %> Dashboard
      <% end %>
      <%= link_to edit_assignment_path(assignment), class: 'button' do %>
        <%= edit_icon_tag %> Edit
      <% end %>
    </span>
    <% end %>
  </h2>


  <p>
    Due
    <%= assignment.deadline.to_s(:deadline_long) %>
    <% if assignment.deadline >= Time.now %>
    (in <%= time_ago_in_words assignment.deadline %>)
    <% else %>
    (<%= time_ago_in_words assignment.deadline %> ago)
    <% end %>
  </p>

  <ul class="deliverables">
  <% assignment.deliverables_for(current_user).each do |deliverable| %>
    <li>
      <div class="summary">
        <span class="name"><%= deliverable.name %></span>
        <div class="new">
          <%= render 'submissions/form',
                :submission => Submission.new(:deliverable => deliverable) %>
        </div>
      </div>
      <div class="details">
        <p class="description">
          <%= deliverable.description %>
        </p>
        <p class="submission" data-pwnfx-scope="submission-info"
                              data-pwnfx-delayed-target="submission-info">
          <%= render 'submissions/info',
                :submission => deliverable.submission_for(current_user) %>
        </p>
      </div>
    </li>
  <% end %>
  </ul>
</section>
