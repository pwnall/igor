<!-- student_infos/new_edit -->
<div class="full_section">
	
<h1 class="full_section">Student Information Form for <%= @s_user.name %></h1>

<%= error_messages_for :student_info %>

<%
if @student_info.new_record?
	url = {:controller => :student_infos, :action => @manual ? :create_manual : :create}
	url[:id] = 0 if @manual
else
	url = {:controller => :student_infos, :action => :update, :id => @student_info.id}
end
%>

<% form_for(@student_info, :url => url, :html => {:class => 'student_form'}) do |f| %>
	<div class="form_box">
		<div class="form_entry">
			<div class="form_label">Taking 6.006 for credit</div>
			<div class="form_field_box">
				<%= f.check_box :wants_credit, :class => 'form_field' %>Yes
			</div>
		</div>
		<div class="form_entry">
			<div class="form_label">(recitation allocation)<br />Enter the classes you are taking on Wednesday and Friday</div>
			<div class="form_field_box">
				<table>
					<thead>
						<tr>
							<td>Time</td>
							<% ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'].zip((0...5).to_a).each do |day, dday| %>
								<td><%= day %></td>
							<% end %>
						</tr>						
					</thead>
					<tbody>
						<% ['10am', '11am', '12pm', '1pm', '2pm', '3pm', '4pm'].zip((10..16).to_a).each do |hour, dhour| %>
							<tr>
								<td><%= hour %></td>
								<% (0...5).each do |day| %>
									<td>
										<% timeslot = day + dhour * 10
											if @recitation_conflicts.has_key? timeslot
												prefix = 'old_recitation_conflicts[]'
												obj = @recitation_conflicts[timeslot]
											else
												prefix = 'recitation_conflicts[]'
												obj = RecitationConflict.new(:timeslot => timeslot)
											end
										fields_for(prefix, obj) do |r|  %>
											<%= r.text_field :class_name, :class => 'form_field', :id => "recitation_conflicts_#{timeslot}_class_name", :size => 8 %>
											<%= r.hidden_field :timeslot, :id => "recitation_conflicts_#{timeslot}_timeslot" %>
										<% end %>
									</td>
								<% end %>
							</tr>
						<% end %>						
					</tbody>
				</table>
			</div>			
		</div>					
		<div class="form_entry">
			<div class="form_label">Have you taken</div>
			<div class="form_field_box">
				<%= f.check_box :has_python, :class => 'form_field' %>6.01
				<%= f.check_box :has_math, :class => 'form_field' %>6.042/18.062
			</div>
		</div>
		<div class="form_entry" id="python_experience_container">
			<div class="form_label">What Python experience do you have?</div>
			<div class="form_field_box">
				<%= f.text_area :python_experience, :rows => 3, :class => 'form_field' %>
			</div>
		</div>
		<div class="form_entry" id="math_experience_container">
			<div class="form_label">What math background do you have?</div>
			<div class="form_field_box">
				<%= f.text_area :math_experience, :rows => 3, :class => 'form_field' %>
			</div>
		</div>		
		<div class="form_entry">
			<div class="form_label">Other comments / questions</div>
			<div class="form_field_box">
				<%= f.text_area :comments, :rows => 5, :class => 'form_field' %>
			</div>
		</div>
		<div class="form_submit_box">
		    <%= f.submit @student_info.new_record? ? "Submit" : "Update", :class => 'form_submit' %>
			or
			<%= link_to 'Go home', :controller => :welcome, :action => :home %>
		</div>
	</div>
<% end %>


<%= javascript_tag <<JS_END
show_div_on_checkbox_setting('python_experience_container', 'student_info_has_python', false);
show_div_on_checkbox_setting('math_experience_container', 'student_info_has_math', false);
JS_END
%>

</div>
